name: Welcome New Contributors

on:
  workflow_call:

permissions:
  pull-requests: write
jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      - name: detect bot author
        id: bot-author-check
        uses: actions/github-script@v8
        with:
          result-encoding: string
          script: return String(context.payload.sender.type === 'Bot' || context.payload.sender.login?.endsWith('[bot]'));

      - name: First Interaction
        if: steps.bot-author-check.outputs.result != 'true'
        uses: actions/first-interaction@v3
        with:
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          # Not currently used but must be supplied.
          issue_message: |
            Hello! ðŸ‘‹
          pr_message: |
            Hello! ðŸ‘‹

            Thanks for opening this pull request! Please check out our [contributing guidelines](https://make.wordpress.org/cli/handbook/contributions/contributing/). We appreciate you taking the initiative to contribute to this project.

            Contributing isn't limited to just code. We encourage you to contribute in the way that best fits your abilities, by writing tutorials, giving a demo at your local meetup, helping other users with their support questions, or revising our documentation.
